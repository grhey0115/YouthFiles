import{r as o,W as T,j as t,b as E}from"./app-yAQSJtCB.js";import{F as p}from"./index-Cj9wS-7M.js";import{R as A,C as F}from"./row-BEATd-KS.js";import{I as L}from"./index-BEIsJxv2.js";import{B as V}from"./button-D34w74xY.js";import{I as z,_ as B}from"./KeyCode-BIBQ-5iG.js";import{T as D}from"./index-CIffzKKO.js";import{s as j}from"./index-Q2CZieaY.js";import"./responsiveObserver-rdbm8B_r.js";import"./asyncToGenerator-C_xl3FJK.js";import"./index-Da8wmaTs.js";import"./collapse-BbEVqHco.js";import"./index-BkIKpbYi.js";import"./compact-item-BE9vaOuG.js";import"./useZIndex-q4v-gC99.js";import"./colors-fiVX3SUh.js";import"./CheckCircleFilled-BFKCfje8.js";import"./InfoCircleFilled-bkiPkIcd.js";import"./EyeOutlined-Buow9Ohn.js";import"./render-Duf7NqYX.js";import"./context-BXHvT865.js";var H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},M=function(a,c){return o.createElement(z,B({},a,{ref:c,icon:H}))},N=o.forwardRef(M);const{Title:P,Text:d,Link:K}=D;function pe(){const{data:b,setData:a,post:c,processing:R,errors:u}=T({otp:""}),[s,w]=o.useState(new Array(6).fill("")),[h,f]=o.useState(!1),[k,x]=o.useState(30),i=o.useRef([]),[g,y]=o.useState(!1),C=(n,e)=>{var v;const{value:r}=n;if(isNaN(r))return;let l=[...s];l[e]=r,w(l),a("otp",l.join("")),r&&e<i.current.length-1&&((v=i.current[e+1])==null||v.focus())},I=(n,e)=>{var r;n.key==="Backspace"&&s[e]===""&&e>0&&((r=i.current[e-1])==null||r.focus())},S=()=>{c(route("otp.check"))},O=async()=>{try{y(!0);const n=await E.post(route("otp.resend"),{},{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}});j.success("OTP has been resent to your device"),f(!0);let e=30;const r=setInterval(()=>{e-=1,x(e),e<=0&&(clearInterval(r),f(!1),x(30))},1e3)}catch(n){console.error("Resend Error:",n),j.error("Failed to resend OTP. Please try again.")}finally{y(!1)}};return t.jsx("div",{style:m.container,children:t.jsxs("div",{style:m.innerContainer,children:[t.jsx(P,{level:3,style:{textAlign:"center"},children:"Account Verification"}),t.jsx(d,{type:"secondary",style:{display:"block",textAlign:"center",marginBottom:"20px"},children:"Enter the 6-Digit PIN sent to your registered Email"}),t.jsxs(p,{onFinish:S,layout:"vertical",children:[t.jsxs(p.Item,{children:[t.jsx(A,{gutter:8,justify:"center",children:s.map((n,e)=>t.jsx(F,{span:4,children:t.jsx(L,{maxLength:1,style:m.otpInput,value:s[e],ref:r=>i.current[e]=r,onChange:r=>C(r.target,e),onKeyDown:r=>I(r,e),onFocus:r=>r.target.select()})},e))}),u.otp&&t.jsx(d,{type:"danger",children:u.otp})]}),t.jsx(p.Item,{children:t.jsx(V,{type:"primary",htmlType:"submit",block:!0,icon:t.jsx(N,{}),loading:R,children:"Submit"})})]}),t.jsx("div",{style:{textAlign:"center",marginTop:"20px"},children:t.jsxs(d,{type:"secondary",children:["Didn't receive the code?"," ",h?t.jsxs("span",{children:["Resend available in ",k," seconds"]}):t.jsx(K,{onClick:O,disabled:g||h,children:g?"Resending...":"Send again"})]})})]})})}const m={container:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#f0f2f5"},innerContainer:{width:"100%",maxWidth:"400px",padding:"20px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},otpInput:{textAlign:"center",fontSize:"24px",padding:"8px",borderRadius:"12px",border:"1px solid #d9d9d9",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}};export{pe as default};
