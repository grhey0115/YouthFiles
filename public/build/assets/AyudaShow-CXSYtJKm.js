import{r as i,R as Je,e as xe,W as bt,j as g,Y as St}from"./app-B53CBMZt.js";import{D as It,g as Rt,i as Mt,R as $t,a as yt,b as Et,A as Ot,L as Nt,S as et}from"./AuthenticatedLayout--G9xcrQg.js";import{C as Xe}from"./index-BDnPJQKA.js";import{R as Pt}from"./EyeOutlined-ggALyYVw.js";import{g as lt,m as He,r as jt,u as fe,C as Ge,c as Le,a as we,b as le,d as Tt,P as zt,e as N,K as Ze,f as Y,i as Lt,w as _t,h as Re,_ as H,j as kt,k as ct,l as We,I as ve,n as be,o as Dt,t as At,p as dt,q as ut,s as _e,v as tt,B as Me,T as Yt}from"./index-CJkcEAEE.js";import{R as Bt,C as nt}from"./row-BTV3FN5r.js";import{U as Xt}from"./index-BM05cnQd.js";import{s as $e}from"./index-DF4vAHK6.js";import"./index-D0YGKa_Y.js";import"./PlusOutlined-CRPGJOWz.js";import"./progress-CpH7RX4w.js";const Ht=t=>{const{componentCls:e,sizePaddingEdgeHorizontal:n,colorSplit:o,lineWidth:r,textPaddingInline:a,orientationMargin:c,verticalMarginInline:s}=t;return{[e]:Object.assign(Object.assign({},jt(t)),{borderBlockStart:`${fe(r)} solid ${o}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:s,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${fe(r)} solid ${o}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${fe(t.dividerHorizontalGutterMargin)} 0`},[`&-horizontal${e}-with-text`]:{display:"flex",alignItems:"center",margin:`${fe(t.dividerHorizontalWithTextGutterMargin)} 0`,color:t.colorTextHeading,fontWeight:500,fontSize:t.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${o}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${fe(r)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${e}-with-text-left`]:{"&::before":{width:`calc(${c} * 100%)`},"&::after":{width:`calc(100% - ${c} * 100%)`}},[`&-horizontal${e}-with-text-right`]:{"&::before":{width:`calc(100% - ${c} * 100%)`},"&::after":{width:`calc(${c} * 100%)`}},[`${e}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:a},"&-dashed":{background:"none",borderColor:o,borderStyle:"dashed",borderWidth:`${fe(r)} 0 0`},[`&-horizontal${e}-with-text${e}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${e}-dashed`]:{borderInlineStartWidth:r,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:o,borderStyle:"dotted",borderWidth:`${fe(r)} 0 0`},[`&-horizontal${e}-with-text${e}-dotted`]:{"&::before, &::after":{borderStyle:"dotted none none"}},[`&-vertical${e}-dotted`]:{borderInlineStartWidth:r,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${e}-with-text`]:{color:t.colorText,fontWeight:"normal",fontSize:t.fontSize},[`&-horizontal${e}-with-text-left${e}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${e}-inner-text`]:{paddingInlineStart:n}},[`&-horizontal${e}-with-text-right${e}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${e}-inner-text`]:{paddingInlineEnd:n}}})}},Zt=t=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:t.marginXS}),Wt=lt("Divider",t=>{const e=He(t,{dividerHorizontalWithTextGutterMargin:t.margin,dividerHorizontalGutterMargin:t.marginLG,sizePaddingEdgeHorizontal:0});return[Ht(e)]},Zt,{unitless:{orientationMargin:!0}});var Vt=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n};const Ft=t=>{const{getPrefixCls:e,direction:n,divider:o}=i.useContext(Ge),{prefixCls:r,type:a="horizontal",orientation:c="center",orientationMargin:s,className:d,rootClassName:f,children:m,dashed:l,variant:I="solid",plain:h,style:p}=t,R=Vt(t,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style"]),w=e("divider",r),[S,b,M]=Wt(w),E=!!m,u=c==="left"&&s!=null,$=c==="right"&&s!=null,C=Le(w,o==null?void 0:o.className,b,M,`${w}-${a}`,{[`${w}-with-text`]:E,[`${w}-with-text-${c}`]:E,[`${w}-dashed`]:!!l,[`${w}-${I}`]:I!=="solid",[`${w}-plain`]:!!h,[`${w}-rtl`]:n==="rtl",[`${w}-no-default-orientation-margin-left`]:u,[`${w}-no-default-orientation-margin-right`]:$},d,f),v=i.useMemo(()=>typeof s=="number"?s:/^\d+$/.test(s)?Number(s):s,[s]),y=Object.assign(Object.assign({},u&&{marginLeft:v}),$&&{marginRight:v});return S(i.createElement("div",Object.assign({className:C,style:Object.assign(Object.assign({},o==null?void 0:o.style),p)},R,{role:"separator"}),m&&a!=="vertical"&&i.createElement("span",{className:`${w}-inner-text`,style:y},m)))};function ft(){var t=document.documentElement.clientWidth,e=window.innerHeight||document.documentElement.clientHeight;return{width:t,height:e}}function Ut(t){var e=t.getBoundingClientRect(),n=document.documentElement;return{left:e.left+(window.pageXOffset||n.scrollLeft)-(n.clientLeft||document.body.clientLeft||0),top:e.top+(window.pageYOffset||n.scrollTop)-(n.clientTop||document.body.clientTop||0)}}function Se(t,e,n,o){var r=Je.unstable_batchedUpdates?function(c){Je.unstable_batchedUpdates(n,c)}:n;return t!=null&&t.addEventListener&&t.addEventListener(e,r,o),{remove:function(){t!=null&&t.removeEventListener&&t.removeEventListener(e,r,o)}}}var Ee=i.createContext(null),Gt=function(e){var n=e.visible,o=e.maskTransitionName,r=e.getContainer,a=e.prefixCls,c=e.rootClassName,s=e.icons,d=e.countRender,f=e.showSwitch,m=e.showProgress,l=e.current,I=e.transform,h=e.count,p=e.scale,R=e.minScale,w=e.maxScale,S=e.closeIcon,b=e.onActive,M=e.onClose,E=e.onZoomIn,u=e.onZoomOut,$=e.onRotateRight,C=e.onRotateLeft,v=e.onFlipX,y=e.onFlipY,O=e.onReset,x=e.toolbarRender,P=e.zIndex,D=e.image,j=i.useContext(Ee),B=s.rotateLeft,V=s.rotateRight,F=s.zoomIn,U=s.zoomOut,J=s.close,W=s.left,G=s.right,ee=s.flipX,q=s.flipY,ae="".concat(a,"-operations-operation");i.useEffect(function(){var z=function(_){_.keyCode===Ze.ESC&&M()};return n&&window.addEventListener("keydown",z),function(){window.removeEventListener("keydown",z)}},[n]);var te=function(L,_){L.preventDefault(),L.stopPropagation(),b(_)},k=i.useCallback(function(z){var L=z.type,_=z.disabled,Z=z.onClick,A=z.icon;return i.createElement("div",{key:L,className:we(ae,"".concat(a,"-operations-operation-").concat(L),le({},"".concat(a,"-operations-operation-disabled"),!!_)),onClick:Z},A)},[ae,a]),se=f?k({icon:W,onClick:function(L){return te(L,-1)},type:"prev",disabled:l===0}):void 0,ne=f?k({icon:G,onClick:function(L){return te(L,1)},type:"next",disabled:l===h-1}):void 0,K=k({icon:q,onClick:y,type:"flipY"}),T=k({icon:ee,onClick:v,type:"flipX"}),re=k({icon:B,onClick:C,type:"rotateLeft"}),X=k({icon:V,onClick:$,type:"rotateRight"}),Q=k({icon:U,onClick:u,type:"zoomOut",disabled:p<=R}),ie=k({icon:F,onClick:E,type:"zoomIn",disabled:p===w}),ce=i.createElement("div",{className:"".concat(a,"-operations")},K,T,re,X,Q,ie);return i.createElement(Tt,{visible:n,motionName:o},function(z){var L=z.className,_=z.style;return i.createElement(zt,{open:!0,getContainer:r??document.body},i.createElement("div",{className:we("".concat(a,"-operations-wrapper"),L,c),style:N(N({},_),{},{zIndex:P})},S===null?null:i.createElement("button",{className:"".concat(a,"-close"),onClick:M},S||J),f&&i.createElement(i.Fragment,null,i.createElement("div",{className:we("".concat(a,"-switch-left"),le({},"".concat(a,"-switch-left-disabled"),l===0)),onClick:function(A){return te(A,-1)}},W),i.createElement("div",{className:we("".concat(a,"-switch-right"),le({},"".concat(a,"-switch-right-disabled"),l===h-1)),onClick:function(A){return te(A,1)}},G)),i.createElement("div",{className:"".concat(a,"-footer")},m&&i.createElement("div",{className:"".concat(a,"-progress")},d?d(l+1,h):"".concat(l+1," / ").concat(h)),x?x(ce,N(N({icons:{prevIcon:se,nextIcon:ne,flipYIcon:K,flipXIcon:T,rotateLeftIcon:re,rotateRightIcon:X,zoomOutIcon:Q,zoomInIcon:ie},actions:{onActive:b,onFlipY:y,onFlipX:v,onRotateLeft:C,onRotateRight:$,onZoomOut:u,onZoomIn:E,onReset:O,onClose:M},transform:I},j?{current:l,total:h}:{}),{},{image:D})):ce)))})},Te={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1};function qt(t,e,n,o){var r=i.useRef(null),a=i.useRef([]),c=i.useState(Te),s=Y(c,2),d=s[0],f=s[1],m=function(p){f(Te),Lt(Te,d)||o==null||o({transform:Te,action:p})},l=function(p,R){r.current===null&&(a.current=[],r.current=_t(function(){f(function(w){var S=w;return a.current.forEach(function(b){S=N(N({},S),b)}),r.current=null,o==null||o({transform:S,action:R}),S})})),a.current.push(N(N({},d),p))},I=function(p,R,w,S,b){var M=t.current,E=M.width,u=M.height,$=M.offsetWidth,C=M.offsetHeight,v=M.offsetLeft,y=M.offsetTop,O=p,x=d.scale*p;x>n?(x=n,O=n/d.scale):x<e&&(x=b?x:e,O=x/d.scale);var P=w??innerWidth/2,D=S??innerHeight/2,j=O-1,B=j*E*.5,V=j*u*.5,F=j*(P-d.x-v),U=j*(D-d.y-y),J=d.x-(F-B),W=d.y-(U-V);if(p<1&&x===1){var G=$*x,ee=C*x,q=ft(),ae=q.width,te=q.height;G<=ae&&ee<=te&&(J=0,W=0)}l({x:J,y:W,scale:x},R)};return{transform:d,resetTransform:m,updateTransform:l,dispatchZoomChange:I}}function ot(t,e,n,o){var r=e+n,a=(n-o)/2;if(n>o){if(e>0)return le({},t,a);if(e<0&&r<o)return le({},t,-a)}else if(e<0||r>o)return le({},t,e<0?a:-a);return{}}function vt(t,e,n,o){var r=ft(),a=r.width,c=r.height,s=null;return t<=a&&e<=c?s={x:0,y:0}:(t>a||e>c)&&(s=N(N({},ot("x",n,t,a)),ot("y",o,e,c))),s}var Ie=1,Kt=1;function Qt(t,e,n,o,r,a,c){var s=r.rotate,d=r.scale,f=r.x,m=r.y,l=i.useState(!1),I=Y(l,2),h=I[0],p=I[1],R=i.useRef({diffX:0,diffY:0,transformX:0,transformY:0}),w=function(u){!e||u.button!==0||(u.preventDefault(),u.stopPropagation(),R.current={diffX:u.pageX-f,diffY:u.pageY-m,transformX:f,transformY:m},p(!0))},S=function(u){n&&h&&a({x:u.pageX-R.current.diffX,y:u.pageY-R.current.diffY},"move")},b=function(){if(n&&h){p(!1);var u=R.current,$=u.transformX,C=u.transformY,v=f!==$&&m!==C;if(!v)return;var y=t.current.offsetWidth*d,O=t.current.offsetHeight*d,x=t.current.getBoundingClientRect(),P=x.left,D=x.top,j=s%180!==0,B=vt(j?O:y,j?y:O,P,D);B&&a(N({},B),"dragRebound")}},M=function(u){if(!(!n||u.deltaY==0)){var $=Math.abs(u.deltaY/100),C=Math.min($,Kt),v=Ie+C*o;u.deltaY>0&&(v=Ie/v),c(v,"wheel",u.clientX,u.clientY)}};return i.useEffect(function(){var E,u,$,C;if(e){$=Se(window,"mouseup",b,!1),C=Se(window,"mousemove",S,!1);try{window.top!==window.self&&(E=Se(window.top,"mouseup",b,!1),u=Se(window.top,"mousemove",S,!1))}catch{}}return function(){var v,y,O,x;(v=$)===null||v===void 0||v.remove(),(y=C)===null||y===void 0||y.remove(),(O=E)===null||O===void 0||O.remove(),(x=u)===null||x===void 0||x.remove()}},[n,h,f,m,s,e]),{isMoving:h,onMouseDown:w,onMouseMove:S,onMouseUp:b,onWheel:M}}function Jt(t){return new Promise(function(e){var n=document.createElement("img");n.onerror=function(){return e(!1)},n.onload=function(){return e(!0)},n.src=t})}function mt(t){var e=t.src,n=t.isCustomPlaceholder,o=t.fallback,r=i.useState(n?"loading":"normal"),a=Y(r,2),c=a[0],s=a[1],d=i.useRef(!1),f=c==="error";i.useEffect(function(){var h=!0;return Jt(e).then(function(p){!p&&h&&s("error")}),function(){h=!1}},[e]),i.useEffect(function(){n&&!d.current?s("loading"):f&&s("normal")},[e]);var m=function(){s("normal")},l=function(p){d.current=!1,c==="loading"&&p!==null&&p!==void 0&&p.complete&&(p.naturalWidth||p.naturalHeight)&&(d.current=!0,m())},I=f&&o?{src:o}:{onLoad:m,src:e};return[l,I,c]}function ke(t,e){var n=t.x-e.x,o=t.y-e.y;return Math.hypot(n,o)}function en(t,e,n,o){var r=ke(t,n),a=ke(e,o);if(r===0&&a===0)return[t.x,t.y];var c=r/(r+a),s=t.x+c*(e.x-t.x),d=t.y+c*(e.y-t.y);return[s,d]}function tn(t,e,n,o,r,a,c){var s=r.rotate,d=r.scale,f=r.x,m=r.y,l=i.useState(!1),I=Y(l,2),h=I[0],p=I[1],R=i.useRef({point1:{x:0,y:0},point2:{x:0,y:0},eventType:"none"}),w=function(u){R.current=N(N({},R.current),u)},S=function(u){if(e){u.stopPropagation(),p(!0);var $=u.touches,C=$===void 0?[]:$;C.length>1?w({point1:{x:C[0].clientX,y:C[0].clientY},point2:{x:C[1].clientX,y:C[1].clientY},eventType:"touchZoom"}):w({point1:{x:C[0].clientX-f,y:C[0].clientY-m},eventType:"move"})}},b=function(u){var $=u.touches,C=$===void 0?[]:$,v=R.current,y=v.point1,O=v.point2,x=v.eventType;if(C.length>1&&x==="touchZoom"){var P={x:C[0].clientX,y:C[0].clientY},D={x:C[1].clientX,y:C[1].clientY},j=en(y,O,P,D),B=Y(j,2),V=B[0],F=B[1],U=ke(P,D)/ke(y,O);c(U,"touchZoom",V,F,!0),w({point1:P,point2:D,eventType:"touchZoom"})}else x==="move"&&(a({x:C[0].clientX-y.x,y:C[0].clientY-y.y},"move"),w({eventType:"move"}))},M=function(){if(n){if(h&&p(!1),w({eventType:"none"}),o>d)return a({x:0,y:0,scale:o},"touchZoom");var u=t.current.offsetWidth*d,$=t.current.offsetHeight*d,C=t.current.getBoundingClientRect(),v=C.left,y=C.top,O=s%180!==0,x=vt(O?$:u,O?u:$,v,y);x&&a(N({},x),"dragRebound")}};return i.useEffect(function(){var E;return n&&e&&(E=Se(window,"touchmove",function(u){return u.preventDefault()},{passive:!1})),function(){var u;(u=E)===null||u===void 0||u.remove()}},[n,e]),{isTouching:h,onTouchStart:S,onTouchMove:b,onTouchEnd:M}}var nn=["fallback","src","imgRef"],on=["prefixCls","src","alt","imageInfo","fallback","movable","onClose","visible","icons","rootClassName","closeIcon","getContainer","current","count","countRender","scaleStep","minScale","maxScale","transitionName","maskTransitionName","imageRender","imgCommonProps","toolbarRender","onTransform","onChange"],rn=function(e){var n=e.fallback,o=e.src,r=e.imgRef,a=Re(e,nn),c=mt({src:o,fallback:n}),s=Y(c,2),d=s[0],f=s[1];return xe.createElement("img",H({ref:function(l){r.current=l,d(l)}},a,f))},gt=function(e){var n=e.prefixCls,o=e.src,r=e.alt,a=e.imageInfo,c=e.fallback,s=e.movable,d=s===void 0?!0:s,f=e.onClose,m=e.visible,l=e.icons,I=l===void 0?{}:l,h=e.rootClassName,p=e.closeIcon,R=e.getContainer,w=e.current,S=w===void 0?0:w,b=e.count,M=b===void 0?1:b,E=e.countRender,u=e.scaleStep,$=u===void 0?.5:u,C=e.minScale,v=C===void 0?1:C,y=e.maxScale,O=y===void 0?50:y,x=e.transitionName,P=x===void 0?"zoom":x,D=e.maskTransitionName,j=D===void 0?"fade":D,B=e.imageRender,V=e.imgCommonProps,F=e.toolbarRender,U=e.onTransform,J=e.onChange,W=Re(e,on),G=i.useRef(),ee=i.useContext(Ee),q=ee&&M>1,ae=ee&&M>=1,te=i.useState(!0),k=Y(te,2),se=k[0],ne=k[1],K=qt(G,v,O,U),T=K.transform,re=K.resetTransform,X=K.updateTransform,Q=K.dispatchZoomChange,ie=Qt(G,d,m,$,T,X,Q),ce=ie.isMoving,z=ie.onMouseDown,L=ie.onWheel,_=tn(G,d,m,v,T,X,Q),Z=_.isTouching,A=_.onTouchStart,me=_.onTouchMove,Ce=_.onTouchEnd,de=T.rotate,ue=T.scale,De=we(le({},"".concat(n,"-moving"),ce));i.useEffect(function(){se||ne(!0)},[se]);var Ae=function(){re("close")},Ye=function(){Q(Ie+$,"zoomIn")},ge=function(){Q(Ie/(Ie+$),"zoomOut")},he=function(){X({rotate:de+90},"rotateRight")},Oe=function(){X({rotate:de-90},"rotateLeft")},Ne=function(){X({flipX:!T.flipX},"flipX")},Pe=function(){X({flipY:!T.flipY},"flipY")},wt=function(){re("reset")},Be=function(pe){var je=S+pe;!Number.isInteger(je)||je<0||je>M-1||(ne(!1),re(pe<0?"prev":"next"),J==null||J(je,S))},Ct=function(pe){!m||!q||(pe.keyCode===Ze.LEFT?Be(-1):pe.keyCode===Ze.RIGHT&&Be(1))},xt=function(pe){m&&(ue!==1?X({x:0,y:0,scale:1},"doubleClick"):Q(Ie+$,"doubleClick",pe.clientX,pe.clientY))};i.useEffect(function(){var oe=Se(window,"keydown",Ct,!1);return function(){oe.remove()}},[m,q,S]);var Ke=xe.createElement(rn,H({},V,{width:e.width,height:e.height,imgRef:G,className:"".concat(n,"-img"),alt:r,style:{transform:"translate3d(".concat(T.x,"px, ").concat(T.y,"px, 0) scale3d(").concat(T.flipX?"-":"").concat(ue,", ").concat(T.flipY?"-":"").concat(ue,", 1) rotate(").concat(de,"deg)"),transitionDuration:(!se||Z)&&"0s"},fallback:c,src:o,onWheel:L,onMouseDown:z,onDoubleClick:xt,onTouchStart:A,onTouchMove:me,onTouchEnd:Ce,onTouchCancel:Ce})),Qe=N({url:o,alt:r},a);return xe.createElement(xe.Fragment,null,xe.createElement(It,H({transitionName:P,maskTransitionName:j,closable:!1,keyboard:!0,prefixCls:n,onClose:f,visible:m,classNames:{wrapper:De},rootClassName:h,getContainer:R},W,{afterClose:Ae}),xe.createElement("div",{className:"".concat(n,"-img-wrapper")},B?B(Ke,N({transform:T,image:Qe},ee?{current:S}:{})):Ke)),xe.createElement(Gt,{visible:m,transform:T,maskTransitionName:j,closeIcon:p,getContainer:R,prefixCls:n,rootClassName:h,icons:I,countRender:E,showSwitch:q,showProgress:ae,current:S,count:M,scale:ue,minScale:v,maxScale:O,toolbarRender:F,onActive:Be,onZoomIn:Ye,onZoomOut:ge,onRotateRight:he,onRotateLeft:Oe,onFlipX:Ne,onFlipY:Pe,onClose:f,onReset:wt,zIndex:W.zIndex!==void 0?W.zIndex+1:void 0,image:Qe}))},Ve=["crossOrigin","decoding","draggable","loading","referrerPolicy","sizes","srcSet","useMap","alt"];function an(t){var e=i.useState({}),n=Y(e,2),o=n[0],r=n[1],a=i.useCallback(function(s,d){return r(function(f){return N(N({},f),{},le({},s,d))}),function(){r(function(f){var m=N({},f);return delete m[s],m})}},[]),c=i.useMemo(function(){return t?t.map(function(s){if(typeof s=="string")return{data:{src:s}};var d={};return Object.keys(s).forEach(function(f){["src"].concat(kt(Ve)).includes(f)&&(d[f]=s[f])}),{data:d}}):Object.keys(o).reduce(function(s,d){var f=o[d],m=f.canPreview,l=f.data;return m&&s.push({data:l,id:d}),s},[])},[t,o]);return[c,a,!!t]}var sn=["visible","onVisibleChange","getContainer","current","movable","minScale","maxScale","countRender","closeIcon","onChange","onTransform","toolbarRender","imageRender"],ln=["src"],cn=function(e){var n,o=e.previewPrefixCls,r=o===void 0?"rc-image-preview":o,a=e.children,c=e.icons,s=c===void 0?{}:c,d=e.items,f=e.preview,m=e.fallback,l=ct(f)==="object"?f:{},I=l.visible,h=l.onVisibleChange,p=l.getContainer,R=l.current,w=l.movable,S=l.minScale,b=l.maxScale,M=l.countRender,E=l.closeIcon,u=l.onChange,$=l.onTransform,C=l.toolbarRender,v=l.imageRender,y=Re(l,sn),O=an(d),x=Y(O,3),P=x[0],D=x[1],j=x[2],B=We(0,{value:R}),V=Y(B,2),F=V[0],U=V[1],J=i.useState(!1),W=Y(J,2),G=W[0],ee=W[1],q=((n=P[F])===null||n===void 0?void 0:n.data)||{},ae=q.src,te=Re(q,ln),k=We(!!I,{value:I,onChange:function(Z,A){h==null||h(Z,A,F)}}),se=Y(k,2),ne=se[0],K=se[1],T=i.useState(null),re=Y(T,2),X=re[0],Q=re[1],ie=i.useCallback(function(_,Z,A,me){var Ce=j?P.findIndex(function(de){return de.data.src===Z}):P.findIndex(function(de){return de.id===_});U(Ce<0?0:Ce),K(!0),Q({x:A,y:me}),ee(!0)},[P,j]);i.useEffect(function(){ne?G||U(0):ee(!1)},[ne]);var ce=function(Z,A){U(Z),u==null||u(Z,A)},z=function(){K(!1),Q(null)},L=i.useMemo(function(){return{register:D,onPreview:ie}},[D,ie]);return i.createElement(Ee.Provider,{value:L},a,i.createElement(gt,H({"aria-hidden":!ne,movable:w,visible:ne,prefixCls:r,closeIcon:E,onClose:z,mousePosition:X,imgCommonProps:te,src:ae,fallback:m,icons:s,minScale:S,maxScale:b,getContainer:p,current:F,count:P.length,countRender:M,onTransform:$,toolbarRender:C,imageRender:v,onChange:ce},y)))},rt=0;function dn(t,e){var n=i.useState(function(){return rt+=1,String(rt)}),o=Y(n,1),r=o[0],a=i.useContext(Ee),c={data:e,canPreview:t};return i.useEffect(function(){if(a)return a.register(r,c)},[]),i.useEffect(function(){a&&a.register(r,c)},[t,e]),r}var un=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName"],fn=["src","visible","onVisibleChange","getContainer","mask","maskClassName","movable","icons","scaleStep","minScale","maxScale","imageRender","toolbarRender"],qe=function(e){var n=e.src,o=e.alt,r=e.onPreviewClose,a=e.prefixCls,c=a===void 0?"rc-image":a,s=e.previewPrefixCls,d=s===void 0?"".concat(c,"-preview"):s,f=e.placeholder,m=e.fallback,l=e.width,I=e.height,h=e.style,p=e.preview,R=p===void 0?!0:p,w=e.className,S=e.onClick,b=e.onError,M=e.wrapperClassName,E=e.wrapperStyle,u=e.rootClassName,$=Re(e,un),C=f&&f!==!0,v=ct(R)==="object"?R:{},y=v.src,O=v.visible,x=O===void 0?void 0:O,P=v.onVisibleChange,D=P===void 0?r:P,j=v.getContainer,B=j===void 0?void 0:j,V=v.mask,F=v.maskClassName,U=v.movable,J=v.icons,W=v.scaleStep,G=v.minScale,ee=v.maxScale,q=v.imageRender,ae=v.toolbarRender,te=Re(v,fn),k=y??n,se=We(!!x,{value:x,onChange:D}),ne=Y(se,2),K=ne[0],T=ne[1],re=mt({src:n,isCustomPlaceholder:C,fallback:m}),X=Y(re,3),Q=X[0],ie=X[1],ce=X[2],z=i.useState(null),L=Y(z,2),_=L[0],Z=L[1],A=i.useContext(Ee),me=!!R,Ce=function(){T(!1),Z(null)},de=we(c,M,u,le({},"".concat(c,"-error"),ce==="error")),ue=i.useMemo(function(){var ge={};return Ve.forEach(function(he){e[he]!==void 0&&(ge[he]=e[he])}),ge},Ve.map(function(ge){return e[ge]})),De=i.useMemo(function(){return N(N({},ue),{},{src:k})},[k,ue]),Ae=dn(me,De),Ye=function(he){var Oe=Ut(he.target),Ne=Oe.left,Pe=Oe.top;A?A.onPreview(Ae,k,Ne,Pe):(Z({x:Ne,y:Pe}),T(!0)),S==null||S(he)};return i.createElement(i.Fragment,null,i.createElement("div",H({},$,{className:de,onClick:me?Ye:S,style:N({width:l,height:I},E)}),i.createElement("img",H({},ue,{className:we("".concat(c,"-img"),le({},"".concat(c,"-img-placeholder"),f===!0),w),style:N({height:I},h),ref:Q},ie,{width:l,height:I,onError:b})),ce==="loading"&&i.createElement("div",{"aria-hidden":"true",className:"".concat(c,"-placeholder")},f),V&&me&&i.createElement("div",{className:we("".concat(c,"-mask"),F),style:{display:(h==null?void 0:h.display)==="none"?"none":void 0}},V)),!A&&me&&i.createElement(gt,H({"aria-hidden":!K,visible:K,prefixCls:d,onClose:Ce,mousePosition:_,src:k,alt:o,imageInfo:{width:l,height:I},fallback:m,getContainer:B,icons:J,movable:U,scaleStep:W,minScale:G,maxScale:ee,rootClassName:u,imageRender:q,imgCommonProps:ue,toolbarRender:ae},te)))};qe.PreviewGroup=cn;var vn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"},mn=function(e,n){return i.createElement(ve,H({},e,{ref:n,icon:vn}))},gn=i.forwardRef(mn),hn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"},pn=function(e,n){return i.createElement(ve,H({},e,{ref:n,icon:hn}))},wn=i.forwardRef(pn),Cn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"},xn=function(e,n){return i.createElement(ve,H({},e,{ref:n,icon:Cn}))},it=i.forwardRef(xn),bn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"},Sn=function(e,n){return i.createElement(ve,H({},e,{ref:n,icon:bn}))},In=i.forwardRef(Sn),Rn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"},Mn=function(e,n){return i.createElement(ve,H({},e,{ref:n,icon:Rn}))},$n=i.forwardRef(Mn);const Fe=t=>({position:t||"absolute",inset:0}),yn=t=>{const{iconCls:e,motionDurationSlow:n,paddingXXS:o,marginXXS:r,prefixCls:a,colorTextLightSolid:c}=t;return{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:c,background:new be("#000").setAlpha(.5).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${n}`,[`.${a}-mask-info`]:Object.assign(Object.assign({},At),{padding:`0 ${fe(o)}`,[e]:{marginInlineEnd:r,svg:{verticalAlign:"baseline"}}})}},En=t=>{const{previewCls:e,modalMaskBg:n,paddingSM:o,marginXL:r,margin:a,paddingLG:c,previewOperationColorDisabled:s,previewOperationHoverColor:d,motionDurationSlow:f,iconCls:m,colorTextLightSolid:l}=t,I=new be(n).setAlpha(.1),h=I.clone().setAlpha(.2);return{[`${e}-footer`]:{position:"fixed",bottom:r,left:{_skip_check_:!0,value:"50%"},display:"flex",flexDirection:"column",alignItems:"center",color:t.previewOperationColor,transform:"translateX(-50%)"},[`${e}-progress`]:{marginBottom:a},[`${e}-close`]:{position:"fixed",top:r,right:{_skip_check_:!0,value:r},display:"flex",color:l,backgroundColor:I.toRgbString(),borderRadius:"50%",padding:o,outline:0,border:0,cursor:"pointer",transition:`all ${f}`,"&:hover":{backgroundColor:h.toRgbString()},[`& > ${m}`]:{fontSize:t.previewOperationSize}},[`${e}-operations`]:{display:"flex",alignItems:"center",padding:`0 ${fe(c)}`,backgroundColor:I.toRgbString(),borderRadius:100,"&-operation":{marginInlineStart:o,padding:o,cursor:"pointer",transition:`all ${f}`,userSelect:"none",[`&:not(${e}-operations-operation-disabled):hover > ${m}`]:{color:d},"&-disabled":{color:s,cursor:"not-allowed"},"&:first-of-type":{marginInlineStart:0},[`& > ${m}`]:{fontSize:t.previewOperationSize}}}}},On=t=>{const{modalMaskBg:e,iconCls:n,previewOperationColorDisabled:o,previewCls:r,zIndexPopup:a,motionDurationSlow:c}=t,s=new be(e).setAlpha(.1),d=s.clone().setAlpha(.2);return{[`${r}-switch-left, ${r}-switch-right`]:{position:"fixed",insetBlockStart:"50%",zIndex:t.calc(a).add(1).equal(),display:"flex",alignItems:"center",justifyContent:"center",width:t.imagePreviewSwitchSize,height:t.imagePreviewSwitchSize,marginTop:t.calc(t.imagePreviewSwitchSize).mul(-1).div(2).equal(),color:t.previewOperationColor,background:s.toRgbString(),borderRadius:"50%",transform:"translateY(-50%)",cursor:"pointer",transition:`all ${c}`,userSelect:"none","&:hover":{background:d.toRgbString()},"&-disabled":{"&, &:hover":{color:o,background:"transparent",cursor:"not-allowed",[`> ${n}`]:{cursor:"not-allowed"}}},[`> ${n}`]:{fontSize:t.previewOperationSize}},[`${r}-switch-left`]:{insetInlineStart:t.marginSM},[`${r}-switch-right`]:{insetInlineEnd:t.marginSM}}},Nn=t=>{const{motionEaseOut:e,previewCls:n,motionDurationSlow:o,componentCls:r}=t;return[{[`${r}-preview-root`]:{[n]:{height:"100%",textAlign:"center",pointerEvents:"none"},[`${n}-body`]:Object.assign(Object.assign({},Fe()),{overflow:"hidden"}),[`${n}-img`]:{maxWidth:"100%",maxHeight:"70%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${o} ${e} 0s`,userSelect:"none","&-wrapper":Object.assign(Object.assign({},Fe()),{transition:`transform ${o} ${e} 0s`,display:"flex",justifyContent:"center",alignItems:"center","& > *":{pointerEvents:"auto"},"&::before":{display:"inline-block",width:1,height:"50%",marginInlineEnd:-1,content:'""'}})},[`${n}-moving`]:{[`${n}-preview-img`]:{cursor:"grabbing","&-wrapper":{transitionDuration:"0s"}}}}},{[`${r}-preview-root`]:{[`${n}-wrap`]:{zIndex:t.zIndexPopup}}},{[`${r}-preview-operations-wrapper`]:{position:"fixed",zIndex:t.calc(t.zIndexPopup).add(1).equal()},"&":[En(t),On(t)]}]},Pn=t=>{const{componentCls:e}=t;return{[e]:{position:"relative",display:"inline-block",[`${e}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${e}-img-placeholder`]:{backgroundColor:t.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${e}-mask`]:Object.assign({},yn(t)),[`${e}-mask:hover`]:{opacity:1},[`${e}-placeholder`]:Object.assign({},Fe())}}},jn=t=>{const{previewCls:e}=t;return{[`${e}-root`]:Dt(t,"zoom"),"&":Mt(t,!0)}},Tn=t=>({zIndexPopup:t.zIndexPopupBase+80,previewOperationColor:new be(t.colorTextLightSolid).setAlpha(.65).toRgbString(),previewOperationHoverColor:new be(t.colorTextLightSolid).setAlpha(.85).toRgbString(),previewOperationColorDisabled:new be(t.colorTextLightSolid).setAlpha(.25).toRgbString(),previewOperationSize:t.fontSizeIcon*1.5}),ht=lt("Image",t=>{const e=`${t.componentCls}-preview`,n=He(t,{previewCls:e,modalMaskBg:new be("#000").setAlpha(.45).toRgbString(),imagePreviewSwitchSize:t.controlHeightLG});return[Pn(n),Nn(n),Rt(He(n,{componentCls:e})),jn(n)]},Tn);var zn=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n};const pt={rotateLeft:i.createElement(gn,null),rotateRight:i.createElement(wn,null),zoomIn:i.createElement(In,null),zoomOut:i.createElement($n,null),close:i.createElement($t,null),left:i.createElement(yt,null),right:i.createElement(Et,null),flipX:i.createElement(it,null),flipY:i.createElement(it,{rotate:90})},Ln=t=>{var{previewPrefixCls:e,preview:n}=t,o=zn(t,["previewPrefixCls","preview"]);const{getPrefixCls:r}=i.useContext(Ge),a=r("image",e),c=`${a}-preview`,s=r(),d=dt(a),[f,m,l]=ht(a,d),[I]=ut("ImagePreview",typeof n=="object"?n.zIndex:void 0),h=i.useMemo(()=>{var p;if(n===!1)return n;const R=typeof n=="object"?n:{},w=Le(m,l,d,(p=R.rootClassName)!==null&&p!==void 0?p:"");return Object.assign(Object.assign({},R),{transitionName:_e(s,"zoom",R.transitionName),maskTransitionName:_e(s,"fade",R.maskTransitionName),rootClassName:w,zIndex:I})},[n]);return f(i.createElement(qe.PreviewGroup,Object.assign({preview:h,previewPrefixCls:c,icons:pt},o)))},_n=Ln;var at=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n};const Ue=t=>{var e;const{prefixCls:n,preview:o,className:r,rootClassName:a,style:c}=t,s=at(t,["prefixCls","preview","className","rootClassName","style"]),{getPrefixCls:d,locale:f=tt,getPopupContainer:m,image:l}=i.useContext(Ge),I=d("image",n),h=d(),p=f.Image||tt.Image,R=dt(I),[w,S,b]=ht(I,R),M=Le(a,S,b,R),E=Le(r,S,l==null?void 0:l.className),[u]=ut("ImagePreview",typeof o=="object"?o.zIndex:void 0),$=i.useMemo(()=>{var v;if(o===!1)return o;const y=typeof o=="object"?o:{},{getContainer:O,closeIcon:x}=y,P=at(y,["getContainer","closeIcon"]);return Object.assign(Object.assign({mask:i.createElement("div",{className:`${I}-mask-info`},i.createElement(Pt,null),p==null?void 0:p.preview),icons:pt},P),{getContainer:O??m,transitionName:_e(h,"zoom",y.transitionName),maskTransitionName:_e(h,"fade",y.maskTransitionName),zIndex:u,closeIcon:x??((v=l==null?void 0:l.preview)===null||v===void 0?void 0:v.closeIcon)})},[o,p,(e=l==null?void 0:l.preview)===null||e===void 0?void 0:e.closeIcon]),C=Object.assign(Object.assign({},l==null?void 0:l.style),c);return w(i.createElement(qe,Object.assign({prefixCls:I,preview:$,rootClassName:M,className:E,style:C},s)))};Ue.PreviewGroup=_n;var kn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},Dn=function(e,n){return i.createElement(ve,H({},e,{ref:n,icon:kn}))},An=i.forwardRef(Dn),Yn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},Bn=function(e,n){return i.createElement(ve,H({},e,{ref:n,icon:Yn}))},Xn=i.forwardRef(Bn),Hn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},Zn=function(e,n){return i.createElement(ve,H({},e,{ref:n,icon:Hn}))},Wn=i.forwardRef(Zn),Vn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},Fn=function(e,n){return i.createElement(ve,H({},e,{ref:n,icon:Vn}))},st=i.forwardRef(Fn);const{Title:ze,Text:ye,Paragraph:Un}=Yt,ao=({ayuda:t,auth:e,ayudaApplicant:n,assistanceReceived:o})=>{const{post:r,data:a,setData:c,errors:s}=bt({files:{}}),[d,f]=i.useState({}),[m,l]=i.useState((n==null?void 0:n.status)||"not_applied"),[I,h]=i.useState((n==null?void 0:n.assistance_received)||!1);i.useEffect(()=>{n!=null&&n.status&&(n==null?void 0:n.status)!==m&&l(n.status),n!=null&&n.assistance_received&&h(!0)},[n]);const p=()=>{if(t!=null&&t.requirements&&t.requirements.length>0&&t.requirements.some(M=>!a.files[M.id])){$e.error("Please upload all required documents before applying.");return}r(route("ayudas.apply",t.id),{data:{files:a.files},onSuccess:()=>{l("pending"),$e.success("Applied successfully. You will be notified if approved.")},onError:()=>{$e.error("Failed to apply for the ayuda.")}})},R=()=>{r(route("ayudas.cancel",t.id),{onSuccess:()=>{l(null),$e.info("Application canceled.")},onError:()=>{$e.error("Failed to cancel application.")}})},w=(b,M)=>{c("files",{...a.files,[b]:M});const E=new FileReader;E.onloadend=()=>{f(u=>({...u,[b]:E.result}))},M&&E.readAsDataURL(M)},S=()=>o==="received"?g.jsx(Me,{type:"primary",disabled:!0,icon:g.jsx(Wn,{}),children:"Assistance Received"}):m==="pending"?g.jsx(Me,{type:"primary",danger:!0,onClick:R,icon:g.jsx(Xn,{}),children:"Pending Approval (Cancel Application)"}):m==="approved"?g.jsx(Me,{type:"primary",disabled:!0,icon:g.jsx(An,{}),children:"Application Approved (Wait for the Announcement)"}):g.jsx(Me,{type:"primary",onClick:p,icon:g.jsx(st,{}),children:"Apply for Ayuda"});return t?g.jsxs(Ot,{user:e,header:g.jsx(ze,{level:2,children:"Ayuda Details"}),children:[g.jsx(St,{title:(t==null?void 0:t.title)||"Ayuda Details"}),g.jsxs(Nt.Content,{className:"container mx-auto p-4",children:[g.jsx(Xe,{bordered:!1,style:{marginBottom:"24px",backgroundColor:"#f0f2f5"},children:g.jsx(Ue,{src:`/storage/${(t==null?void 0:t.header)||"default-banner.jpg"}`,alt:"Ayuda Banner",width:"100%",height:300,style:{objectFit:"cover",borderRadius:"8px"}})}),g.jsx(Xe,{bordered:!1,style:{padding:"24px",borderRadius:"8px"},children:g.jsxs(Bt,{gutter:[24,24],children:[g.jsxs(nt,{xs:24,md:16,children:[g.jsx(ze,{level:3,style:{marginBottom:"16px"},children:(t==null?void 0:t.title)||"No Title"}),g.jsxs(et,{direction:"vertical",size:"middle",style:{display:"flex"},children:[g.jsxs(ye,{children:[g.jsx("strong",{children:"Start Date:"})," ",t!=null&&t.date_start?new Date(t.date_start).toLocaleDateString():"N/A"]}),g.jsxs(ye,{children:[g.jsx("strong",{children:"End Date:"})," ",t!=null&&t.date_end?new Date(t.date_end).toLocaleDateString():"N/A"]}),g.jsxs(ye,{children:[g.jsx("strong",{children:"Filter:"})," ",(t==null?void 0:t.filter)||"N/A"]}),g.jsxs(ye,{children:[g.jsx("strong",{children:"Requirements Needed:"})," ",(t==null?void 0:t.requirements_needed)===1?"Yes":"No"]})]}),g.jsx(Ft,{}),g.jsx(ze,{level:4,children:"Upload Requirements"}),g.jsxs(Un,{children:["Please upload all required documents to apply for this Ayuda. Accepted formats are: ",g.jsx("strong",{children:".jpg, .png, .pdf"}),"."]}),(t==null?void 0:t.requirements)&&t.requirements.length>0&&g.jsx(et,{direction:"vertical",size:"large",style:{display:"flex"},children:t.requirements.map(b=>g.jsxs("div",{className:"mb-4",children:[g.jsx(ye,{children:b.requirement_name}),g.jsx(Xt,{beforeUpload:M=>(w(b.id,M),!1),maxCount:1,fileList:a.files[b.id]?[a.files[b.id]]:[],onRemove:()=>w(b.id,null),children:g.jsx(Me,{icon:g.jsx(st,{}),children:"Upload"})}),s&&s[`files.${b.id}`]&&g.jsx("div",{className:"text-red-500 text-sm mt-1",children:s[`files.${b.id}`]}),d[b.id]&&g.jsx("div",{className:"mt-2",children:g.jsx(Ue,{src:d[b.id],alt:"Preview",width:200,height:100,style:{borderRadius:"8px"}})})]},b.id))})]}),g.jsx(nt,{xs:24,md:8,children:g.jsxs(Xe,{style:{textAlign:"center",borderRadius:"8px"},children:[g.jsx(ze,{level:4,children:"Application Status"}),g.jsx("div",{style:{marginTop:"24px"},children:S()})]})})]})})]})]}):g.jsx("div",{children:"Loading Ayuda details..."})};export{ao as default};
