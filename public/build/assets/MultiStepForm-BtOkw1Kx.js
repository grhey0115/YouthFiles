import{r as P,W as H,j as r}from"./app-BJ_pGXN8.js";import K from"./PersonalInformation-BwumzzHl.js";import L from"./EducationalBackground-2gVyvMSl.js";import Q from"./AdditionalInformation-DhtkN2sb.js";import V from"./EmergencyContact-BC5VBlKZ.js";import X from"./StepIndicator-CuSuRt8q.js";import{s as A}from"./index-uEXLkJRP.js";import"./index-jnZ1OZj6.js";import"./iconBase-CzSPnzuJ.js";import"./KeyCode-bRjy_Q9s.js";import"./render-CMEhHArY.js";import"./asyncToGenerator-D8RFqFAM.js";import"./context-BOla0zYz.js";import"./useZIndex-CM4gsMSk.js";import"./CheckCircleFilled-DZe5PU2t.js";import"./InfoCircleFilled-BjNsC0Es.js";const es=({personalInfo:s,educationalBackground:h,additionalInformation:e,emergencyContact:t})=>{const[p,S]=P.useState(1),[M,D]=P.useState({front_id:null,back_id:null}),{data:x,setData:j,post:O,processing:R}=H({barangay:(s==null?void 0:s.barangay)||"",sitio:(s==null?void 0:s.sitio)||"",religion:(s==null?void 0:s.religion)||"",date_of_birth:(s==null?void 0:s.date_of_birth)||"",age:(s==null?void 0:s.age)||"",civil_status:(s==null?void 0:s.civil_status)||"",is_solo_parent:(s==null?void 0:s.is_solo_parent)||!1,gender:(s==null?void 0:s.gender)||"",family_members:(s==null?void 0:s.family_members)||"",siblings:(s==null?void 0:s.siblings)||"",valid_id_paths:(s==null?void 0:s.valid_id_paths)||[],current_status:(h==null?void 0:h.current_status)||"",last_year_attended:(h==null?void 0:h.last_year_attended)||"",year_graduated:(h==null?void 0:h.year_graduated)||"",year_level:(h==null?void 0:h.year_level)||"",course:(h==null?void 0:h.course)||"",is_currently_working:(e==null?void 0:e.is_currently_working)||"0",hobbies:(e==null?void 0:e.hobbies)||[],is_pwd:(e==null?void 0:e.is_pwd)||"0",has_conflict_with_law:(e==null?void 0:e.has_conflict_with_law)||"0",is_indigenous:(e==null?void 0:e.is_indigenous)||"0",is_registered_voter:(e==null?void 0:e.is_registered_voter)||"1",attended_assembly:(e==null?void 0:e.attended_assembly)||"1",why_no_assembly:(e==null?void 0:e.why_no_assembly)||"",residency_status:(e==null?void 0:e.residency_status)||"Permanent",name:(t==null?void 0:t.name)||"",relationship:(t==null?void 0:t.relationship)||"",contact_number:(t==null?void 0:t.contact_number)||"",address:(t==null?void 0:t.address)||""}),y=_=>{_.preventDefault(),F(_),m()},u=_=>{const{name:v,value:w,type:b,checked:q}=_.target;if(j({...x,[v]:b==="checkbox"?q:w}),v==="date_of_birth"){const z=N=>{const G=new Date-new Date(N);return Math.floor(G/315576e5)};j(N=>({...N,age:z(w)}))}},T=(_,v)=>{D(w=>({...w,[v]:_}))},J=_=>{D(v=>({...v,[_]:null}))},U=_=>{j(v=>({...v,hobbies:_}))},F=_=>{_.preventDefault();const v=["/profile-step1","/profile-step2","/profile-step3","/profile-step4"],w=new FormData;Object.keys(x).forEach(b=>{w.append(b,x[b])}),Object.keys(x).forEach(b=>{Array.isArray(x[b])?w.append(b,JSON.stringify(x[b])):w.append(b,x[b])}),p===4&&w.append("profile_completed",!0),O(v[p-1],w,{headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{p<4?m():A.success("Profile submitted successfully!",2,()=>{window.location.href=route("pending-approval")})},onError:b=>{console.error("Submission Error:",b),A.error("Failed to save profile information. Please try again.")}})},m=()=>S(_=>_+1),E=()=>S(_=>_-1),W=_=>S(_),$=()=>{switch(p){case 1:return r.jsx(K,{data:x,handleChange:u,files:M,handleFileChange:T,handleRemoveFile:J,handleNextStep:y});case 2:return r.jsx(L,{data:x,handleChange:u,handleNextStep:y,prevStep:E});case 3:return r.jsx(Q,{data:x,handleChange:u,handleTagChange:U,handleNextStep:y,prevStep:E});case 4:return r.jsx(V,{data:x,handleChange:u,handleSubmit:F,prevStep:E,processing:R});default:return null}};return r.jsxs("div",{className:"flex flex-col md:flex-row h-screen",children:[r.jsx(X,{currentStep:p,goToStep:W}),r.jsxs("div",{className:"w-full max-w-4xl mx-auto mt-8 px-4 md:px-8",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Profile Completion Progress"}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:r.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${p/4*100}%`}})})]}),$()]})]})};export{es as default};
