import{r as i,q as ae,j as e,Y as ce,y as w}from"./app-BJ_pGXN8.js";import{A as le,S as l,R as de}from"./AuthenticatedLayout-CcyOQCtV.js";import{d as A}from"./styled-components.browser.esm-Di-Y5KA6.js";import{S as u}from"./index-FNFJS9sj.js";import{R as y}from"./TeamOutlined-CAb1vU4V.js";import{A as E}from"./index-Bl47VO64.js";import{R as N,C as p}from"./row-DKYt3iBb.js";import{C as d,R as me}from"./index-D_ASOi_l.js";import{T as R}from"./Timeline-BKbsCPOZ.js";import{R as F}from"./CalendarOutlined-D7xW3Clu.js";import{R as pe}from"./EnvironmentOutlined-BXiYueaX.js";import{D as $}from"./index-C_g5Xa1V.js";import{T as a}from"./index-OrizeMZL.js";import{B as r}from"./button-CSotSkDx.js";import{R as L,a as P,b as M,c as U}from"./WhatsAppOutlined-B7UV16Uf.js";import{M as xe}from"./index-Cy9oL28I.js";import{I as he}from"./index-BD7ROwi3.js";import{I as B,_ as O}from"./KeyCode-bRjy_Q9s.js";import{U as ue,R as fe}from"./index-ByWCcvJa.js";import{T as je}from"./index-8Gg8OmwI.js";import{s as c}from"./index-uEXLkJRP.js";import{T as _}from"./index-CRnzXw3W.js";import{P as ve}from"./progress-bUTkV0Es.js";import{R as ge}from"./TrophyOutlined-Cduuv0kH.js";import{R as be}from"./DollarOutlined-B7IRSy3m.js";import{R as we}from"./asyncToGenerator-D8RFqFAM.js";import{R as ye}from"./ShareAltOutlined-COAbPBj_.js";import"./index-ledLULYm.js";import"./responsiveObserver-DWYzDpUL.js";import"./index-CU9C8l-B.js";import"./useBreakpoint-CvoPH6LG.js";import"./useZIndex-CM4gsMSk.js";import"./EllipsisOutlined-DmPR9OAI.js";import"./PurePanel-CApDpRGy.js";import"./compact-item-DcK6bA7_.js";import"./index-CUWDS_la.js";import"./collapse-BbEVqHco.js";import"./UserOutlined-C7u61TJg.js";import"./SettingOutlined-CipL_Fhd.js";import"./proxy-D7-oiazV.js";import"./index-RwVRnHPv.js";import"./colors-DIxSuhzo.js";import"./index-CWa3atzK.js";import"./Skeleton-C1FV8kdE.js";import"./CheckCircleFilled-DZe5PU2t.js";import"./InfoCircleFilled-BjNsC0Es.js";import"./render-CMEhHArY.js";import"./useClosable-BO97-8Ve.js";import"./fade-Cmijq898.js";import"./EyeOutlined-C4jiOtQw.js";import"./context-BOla0zYz.js";var Re={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},Se=function(f,m){return i.createElement(B,O({},f,{ref:m,icon:Re}))},Ce=i.forwardRef(Se),ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 394c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H400V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v236H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h228v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h164c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V394h164zM628 630H400V394h228v236z"}}]},name:"number",theme:"outlined"},Ie=function(f,m){return i.createElement(B,O({},f,{ref:m,icon:ke}))},Ne=i.forwardRef(Ie);const{Text:$e}=je,_e=A.div`
    display: none;
    @media (max-width: 992px) {
        display: block;
        margin: 16px 0;
        padding: 16px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
`,Te=A(d)`
    @media (max-width: 992px) {
        display: none;
    }
`,_t=()=>{const{event:t,user:f,isFull:m,flash:De={},hasJoined:V,attendance_status:x,paymentStatus:H,relatedEvents:j}=ae().props,[z,Y]=i.useState(H),[v,T]=i.useState(V||!1),[S,J]=i.useState(!1),[q,g]=i.useState(!1),[b,W]=i.useState(""),[h,G]=i.useState([]),[Q,C]=i.useState(!1);i.useEffect(()=>{K()},[t]);const K=()=>{const s=new Date,n=new Date(t.end_time);J(s>n)},X=()=>{t.registration_fee>0?g(!0):w.post(route("events.join",t.id),{},{onSuccess:()=>{T(!0),c.success("Successfully registered for the event!")},onError:()=>c.error("Failed to register for the event.")})},Z=()=>{w.post(route("events.cancel",t.id),{},{onSuccess:()=>{T(!1),c.info("Successfully cancelled your registration.")},onError:()=>c.error("Failed to cancel registration.")})},ee=async()=>{if(!b||h.length===0){c.error("Please provide all required payment details.");return}C(!0);const s=new FormData;s.append("reference_number",b),s.append("receipt",h[0].originFileObj);try{await w.post(route("events.payment.store",t.id),s,{onSuccess:()=>{g(!1),Y("pending"),c.success("Payment submitted successfully!")},onError:()=>c.error("Failed to submit payment."),onFinish:()=>C(!1)})}catch(n){console.error("Payment error:",n),c.error("An unexpected error occurred."),C(!1)}},te=()=>S?e.jsx(_,{color:"red",children:"Event Ended"}):m?e.jsx(_,{color:"orange",children:"Full"}):e.jsx(_,{color:"green",children:"Open for Registration"}),se=()=>{const s=new Date,n=new Date(t.start_time),I=new Date(t.end_time)-n,ie=s-n,ne=Math.min(Math.max(ie/I*100,0),100);return e.jsxs(d,{title:"Event Progress",className:"mb-4",children:[e.jsx(ve,{percent:Number(ne.toFixed(1)),status:S?"success":"active",strokeColor:{"0%":"#108ee9","100%":"#87d068"}}),e.jsxs(N,{gutter:16,className:"mt-4",children:[e.jsx(p,{span:8,children:e.jsx(u,{title:"Registered",value:t.slots-t.available_slots,suffix:`/ ${t.slots}`,prefix:e.jsx(y,{})})}),e.jsx(p,{span:8,children:e.jsx(u,{title:"Youth Points",value:t.youth_points,prefix:e.jsx(ge,{})})}),t.registration_fee>0&&e.jsx(p,{span:8,children:e.jsx(u,{title:"Registration Fee",value:t.registration_fee,prefix:e.jsx(be,{}),formatter:oe=>`₱${oe}`})})]})]})},D=()=>S?v&&x==="present"?e.jsx(r,{type:"primary",icon:e.jsx(fe,{}),onClick:()=>window.location.href=route("events.certificate",t.id),children:"Download Certificate"}):e.jsx(r,{disabled:!0,children:"Event Ended"}):v?e.jsx(r,{danger:!0,icon:e.jsx(Ce,{}),onClick:Z,children:"Cancel Registration"}):m?e.jsx(r,{disabled:!0,children:"Event is Full"}):z==="pending"?e.jsx(r,{disabled:!0,icon:e.jsx(we,{}),children:"Payment Pending"}):e.jsx(r,{type:"primary",icon:e.jsx(de,{}),onClick:X,children:t.registration_fee>0?`Register (₱${t.registration_fee})`:"Register Now"}),o=s=>{const n=window.location.href,k=encodeURIComponent(t.name);encodeURIComponent(t.description.replace(/<[^>]*>/g,""));const I={facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(n)}`,twitter:`https://twitter.com/intent/tweet?text=${k}&url=${encodeURIComponent(n)}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(n)}`,whatsapp:`https://api.whatsapp.com/send?text=${k}%20${encodeURIComponent(n)}`};window.open(I[s],"_blank","width=600,height=400")},re=()=>e.jsx(d,{title:e.jsxs(l,{children:[e.jsx(ye,{})," Share This Event"]}),className:"mb-4",children:e.jsxs(l,{size:"middle",children:[e.jsx(a,{title:"Share on Facebook",children:e.jsx(r,{type:"primary",shape:"circle",icon:e.jsx(L,{}),onClick:()=>o("facebook"),style:{backgroundColor:"#1877f2"}})}),e.jsx(a,{title:"Share on Twitter",children:e.jsx(r,{type:"primary",shape:"circle",icon:e.jsx(P,{}),onClick:()=>o("twitter"),style:{backgroundColor:"#1da1f2"}})}),e.jsx(a,{title:"Share on LinkedIn",children:e.jsx(r,{type:"primary",shape:"circle",icon:e.jsx(M,{}),onClick:()=>o("linkedin"),style:{backgroundColor:"#0a66c2"}})}),e.jsx(a,{title:"Share on WhatsApp",children:e.jsx(r,{type:"primary",shape:"circle",icon:e.jsx(U,{}),onClick:()=>o("whatsapp"),style:{backgroundColor:"#25d366"}})})]})});return e.jsxs(le,{children:[e.jsx(ce,{title:t.name}),e.jsxs("div",{className:"relative h-[400px] w-full mb-8",children:[e.jsx("img",{src:`/storage/${t.header_image}`,alt:t.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:t.name}),te()]})})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx(_e,{children:e.jsxs(l,{direction:"vertical",className:"w-full",children:[D(),e.jsx(u,{title:"Available Slots",value:t.available_slots,suffix:`/ ${t.slots}`,prefix:e.jsx(y,{})}),v&&e.jsx(E,{message:"Registration Status",description:x==="present"?"You have attended this event":"You are registered for this event",type:x==="present"?"success":"info",showIcon:!0})]})}),e.jsxs(N,{gutter:[24,24],children:[e.jsxs(p,{xs:24,lg:16,children:[se(),e.jsx(d,{title:"Event Details",className:"mb-4",children:e.jsxs(R,{children:[e.jsxs(R.Item,{dot:e.jsx(F,{}),children:[e.jsxs("p",{children:["Date: ",new Date(t.start_time).toLocaleDateString()]}),e.jsxs("p",{children:["Time: ",new Date(t.start_time).toLocaleTimeString()," - ",new Date(t.end_time).toLocaleTimeString()]})]}),e.jsx(R.Item,{dot:e.jsx(pe,{}),children:e.jsxs("p",{children:["Location: ",t.location]})}),e.jsx(R.Item,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:t.description}})})]})}),re(),(j==null?void 0:j.length)>0&&e.jsx(d,{title:"Related Events",className:"mb-4",children:e.jsx(N,{gutter:[16,16],children:j.map(s=>e.jsx(p,{xs:24,sm:12,md:8,children:e.jsx(d,{hoverable:!0,cover:e.jsx("img",{alt:s.name,src:`/storage/${s.header_image}`,className:"h-48 object-cover"}),onClick:()=>w.visit(route("events.show",s.id)),children:e.jsx(d.Meta,{title:s.name,description:e.jsxs(l,{direction:"vertical",children:[e.jsxs("span",{children:[e.jsx(F,{})," ",new Date(s.start_time).toLocaleDateString()]}),e.jsxs("span",{children:[e.jsx(y,{})," ",s.available_slots," slots left"]})]})})})},s.id))})})]}),e.jsx(p,{xs:24,lg:8,children:e.jsx(Te,{className:"sticky top-4",children:e.jsxs(l,{direction:"vertical",className:"w-full",children:[D(),e.jsx($,{}),e.jsx(u,{title:"Available Slots",value:t.available_slots,suffix:`/ ${t.slots}`,prefix:e.jsx(y,{})}),v&&e.jsxs(e.Fragment,{children:[e.jsx($,{}),e.jsx(E,{message:"Registration Status",description:x==="present"?"You have attended this event":"You are registered for this event",type:x==="present"?"success":"info",showIcon:!0})]}),e.jsx($,{}),e.jsxs("div",{className:"text-center",children:[e.jsx($e,{type:"secondary",children:"Quick Share:"}),e.jsxs(l,{className:"mt-2",children:[e.jsx(a,{title:"Share on Facebook",children:e.jsx(r,{type:"text",icon:e.jsx(L,{}),onClick:()=>o("facebook"),className:"text-[#1877f2] hover:text-[#1877f2]/80"})}),e.jsx(a,{title:"Share on Twitter",children:e.jsx(r,{type:"text",icon:e.jsx(P,{}),onClick:()=>o("twitter"),className:"text-[#1da1f2] hover:text-[#1da1f2]/80"})}),e.jsx(a,{title:"Share on LinkedIn",children:e.jsx(r,{type:"text",icon:e.jsx(M,{}),onClick:()=>o("linkedin"),className:"text-[#0a66c2] hover:text-[#0a66c2]/80"})}),e.jsx(a,{title:"Share on WhatsApp",children:e.jsx(r,{type:"text",icon:e.jsx(U,{}),onClick:()=>o("whatsapp"),className:"text-[#25d366] hover:text-[#25d366]/80"})})]})]})]})})})]})]}),e.jsx(xe,{title:"Submit Payment",open:q,onCancel:()=>g(!1),footer:[e.jsx(r,{onClick:()=>g(!1),children:"Cancel"},"cancel"),e.jsx(r,{type:"primary",onClick:ee,loading:Q,disabled:!b||h.length===0,children:"Submit Payment"},"submit")],children:e.jsxs(l,{direction:"vertical",className:"w-full",children:[e.jsx(he,{placeholder:"Enter GCash Reference Number",value:b,onChange:s=>W(s.target.value),prefix:e.jsx(Ne,{})}),e.jsx(ue,{listType:"picture-card",fileList:h,onChange:({fileList:s})=>G(s),beforeUpload:()=>!1,maxCount:1,children:h.length===0&&e.jsxs("div",{children:[e.jsx(me,{}),e.jsx("div",{style:{marginTop:8},children:"Upload Receipt"})]})})]})})]})};export{_t as default};
